<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SmoovSign - חתימה דיגיטלית</title>
    <meta name="description" content="SmoovSign - מערכת חתימה דיגיטלית לניהול מסמכים">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SmoovSign">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='16' fill='%232563eb'/%3E%3Cpath d='M62 32c-6-4-14-5-21-2s-11 10-11 17c0 6 3 11 8 14s14 5 21 2c3-1 5-3 7-6' stroke='white' stroke-width='7' stroke-linecap='round' fill='none'/%3E%3Cpath d='M50 68l14 10M64 68l-14 10' stroke='white' stroke-width='4' stroke-linecap='round'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' rx='30' fill='%232563eb'/%3E%3Cpath d='M112 58c-11-7-25-9-38-4s-20 18-20 31c0 11 5 20 14 25s25 9 38 4c5-2 9-5 13-11' stroke='white' stroke-width='12' stroke-linecap='round' fill='none'/%3E%3Cpath d='M90 122l25 18M115 122l-25 18' stroke='white' stroke-width='7' stroke-linecap='round'/%3E%3C/svg%3E">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- Firebase SDK (compat mode - no build tools needed) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <!-- EmailJS SDK for email notifications -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="email-config.js"></script>
</head>
<body>
    <!-- Top Navigation -->
    <header class="topbar">
        <div class="topbar-right">
            <div class="logo" onclick="switchView('dashboard')" style="cursor:pointer;">
                <svg class="logo-svg" width="32" height="32" viewBox="0 0 100 100">
                    <rect width="100" height="100" rx="16" fill="#2563eb"/>
                    <path d="M62 32c-6-4-14-5-21-2s-11 10-11 17c0 6 3 11 8 14s14 5 21 2c3-1 5-3 7-6" stroke="white" stroke-width="7" stroke-linecap="round" fill="none"/>
                    <path d="M50 68l14 10M64 68l-14 10" stroke="white" stroke-width="4" stroke-linecap="round"/>
                </svg>
                <span class="logo-text">SmoovSign</span>
            </div>
        </div>
        <nav class="topbar-nav" id="topNav">
            <button class="nav-btn active" data-view="dashboard" onclick="switchView('dashboard')">מסמכים</button>
            <button class="nav-btn" data-view="templates" onclick="switchView('templates')">תבניות</button>
        </nav>
        <div class="topbar-left">
            <button class="btn btn-primary btn-sm" onclick="newDocument()">+ מסמך חדש</button>
            <button class="btn btn-outline btn-sm hide-mobile" onclick="newTemplate()">+ תבנית חדשה</button>
            <!-- User Menu -->
            <div class="user-menu" id="userMenu" style="display:none;">
                <button class="user-avatar-btn" onclick="toggleUserDropdown()">
                    <img id="userAvatar" src="" alt="user" class="user-avatar">
                </button>
                <div class="user-dropdown hidden" id="userDropdown">
                    <div class="user-dropdown-info">
                        <strong id="userName"></strong>
                        <small id="userEmail"></small>
                    </div>
                    <hr>
                    <button class="user-dropdown-item" onclick="signOut()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                        התנתק
                    </button>
                </div>
            </div>
            <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
        </div>
    </header>

    <!-- Mobile Menu Dropdown -->
    <div class="mobile-menu hidden" id="mobileMenu">
        <button class="mobile-menu-item" onclick="switchView('dashboard');closeMobileMenu()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
            מסמכים
        </button>
        <button class="mobile-menu-item" onclick="switchView('templates');closeMobileMenu()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
            תבניות
        </button>
        <button class="mobile-menu-item" onclick="newTemplate();closeMobileMenu()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            תבנית חדשה
        </button>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <svg class="login-logo" width="64" height="64" viewBox="0 0 100 100">
                <rect width="100" height="100" rx="16" fill="#2563eb"/>
                <path d="M62 32c-6-4-14-5-21-2s-11 10-11 17c0 6 3 11 8 14s14 5 21 2c3-1 5-3 7-6" stroke="white" stroke-width="7" stroke-linecap="round" fill="none"/>
                <path d="M50 68l14 10M64 68l-14 10" stroke="white" stroke-width="4" stroke-linecap="round"/>
            </svg>
            <h1>SmoovSign</h1>
            <p>חתימה דיגיטלית חכמה</p>
            <button class="google-signin-btn" onclick="signInWithGoogle()">
                <svg width="20" height="20" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/></svg>
                התחבר עם Google
            </button>
            <div class="login-footer">
                <small>בהתחברות אתה מסכים ל<a href="#">תנאי השימוש</a> ו<a href="#">מדיניות הפרטיות</a></small>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main id="mainContent"></main>

    <!-- Toast -->
    <div id="toast" class="toast hidden"></div>

    <script src="app.js"></script>
</body>
</html>
